<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <title>โปรแกรมวินเลข</title>
  <style>
    body { font-family: sans-serif; background: #eef; text-align: center; }
    .result-box { background: #cfc; margin: 20px auto; padding: 10px; border-radius: 10px; width: 90%; max-width: 400px; }
    .result-box h3 { margin: 10px 0 5px; }
    .copy-btn { margin: 5px; padding: 5px 10px; background: #09f; color: white; border: none; cursor: pointer; }
    .copied { color: green; font-size: 0.9em; }
  </style>
</head>
<body>
  <h2>โปรแกรมวินเลขจากหน้าไปหลัง</h2>
  <input id="input" placeholder="ป้อนเลขเด่น" maxlength="7" onkeydown="if(event.key==='Enter') win()" />
  <button onclick="win()">วินเลข</button>

  <div id="results"></div>

  <script>
    function win() {
      const input = document.getElementById("input").value.trim();

      if (input.length > 7) {
        alert("วินได้สูงสุด 7 ตัว");
        return;
      }
      if (hasDuplicates(input)) {
        alert("เลขซ้ำ กรุณากรอกใหม่");
        return;
      }

      const digits = input.split("");
      const set = new Set(digits);
      const result2 = [];
      const result2All = [];
      const result3 = [];
      const result3All = [];

      // 2 ตัว ไม่รวมเบิ้ล
      for (let i = 0; i < digits.length; i++) {
        for (let j = i + 1; j < digits.length; j++) {
          result2.push(digits[i] + digits[j]);
        }
      }

      // 2 ตัว รวมเบิ้ล
      for (let i = 0; i < digits.length; i++) {
        for (let j = 0; j < digits.length; j++) {
          if (i !== j) result2All.push(digits[i] + digits[j]);
        }
      }

      // 3 ตัว ไม่รวมเบิ้ล
      for (let i = 0; i < digits.length; i++) {
        for (let j = i + 1; j < digits.length; j++) {
          for (let k = j + 1; k < digits.length; k++) {
            result3.push(digits[i] + digits[j] + digits[k]);
          }
        }
      }

      // 3 ตัว รวมเบิ้ล (custom logic)
      for (let i = 0; i < digits.length; i++) {
        for (let j = 0; j < digits.length; j++) {
          for (let k = 0; k < digits.length; k++) {
            let a = digits[i], b = digits[j], c = digits[k];
            let arr = [a, b, c];
            let set = new Set(arr);
            if (set.size < 3) {
              result3All.push(a + b + c);
            }
          }
        }
      }

      result3All.sort();
      result3All = [...new Set(result3All)];

      document.getElementById("results").innerHTML = `
        <div class="result-box">
          <strong>เลขเด่น ${input}</strong>

          <h3>เลข 3 ตัว ไม่รวมเบิ้ล</h3>
          <div>${result3.join(" ")}</div>
          <button class="copy-btn" onclick="copyText('${result3.join(" ")}', this)">คัดลอก</button> <span class="copied"></span>

          <h3>เลข 2 ตัว ไม่รวมเบิ้ล</h3>
          <div>${result2.join(" ")}</div>
          <button class="copy-btn" onclick="copyText('${result2.join(" ")}', this)">คัดลอก</button> <span class="copied"></span>

          <h3>เลข 3 ตัว รวมเบิ้ล</h3>
          <div>${result3All.join(" ")}</div>
          <button class="copy-btn" onclick="copyText('${result3All.join(" ")}', this)">คัดลอก</button> <span class="copied"></span>

          <h3>เลข 2 ตัว รวมเบิ้ล</h3>
          <div>${result2All.join(" ")}</div>
          <button class="copy-btn" onclick="copyText('${result2All.join(" ")}', this)">คัดลอก</button> <span class="copied"></span>
        </div>
      `;
    }

    function hasDuplicates(str) {
      return new Set(str).size !== str.length;
    }

    function copyText(text, btn) {
      navigator.clipboard.writeText(text);
      btn.nextElementSibling.innerText = "คัดลอกแล้ว!";
    }
  </script>
</body>
</html>
