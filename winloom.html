<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡∏£‡∏ß‡∏°</title>

<link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700;800&display=swap" rel="stylesheet">

<style>
  body{
    font-family:'Sarabun',sans-serif;
    background:#f3e5f5;
    padding:20px;
    text-align:center;
  }
  .box{
    max-width:650px;
    margin:auto;
    background:#fff;
    padding:22px;
    border-radius:18px;
    box-shadow:0 8px 22px rgba(0,0,0,.15);
  }
  h2{ color:#8e24aa; margin:0 0 14px; }

  textarea{
    width:100%;
    height:250px;
    font-size:16px;
    padding:12px;
    border-radius:12px;
    border:1px solid #ddd;
    outline:none;
    resize: vertical;
  }

  .btn-row{
    margin-top:14px;
    display:flex;
    gap:10px;
    justify-content:center;
    flex-wrap:wrap;
  }

  button{
    padding:10px 22px;
    font-size:16px;
    border:none;
    border-radius:12px;
    cursor:pointer;
    color:#fff;
  }
  .btn-run{ background:#8e24aa; }
  .btn-clear{ background:#ff5722; }
  .btn-copy{ background:#2196f3; }
  .btn-home{ background:#607d8b; }

  .result{
    margin-top:18px;
    text-align:left;
    background:#f8eafc;
    padding:16px;
    border-radius:14px;
    white-space:pre-wrap;
    word-break:break-word;
    line-height:1.45;
  }

  .copied-msg{
    display:none;
    margin-top:10px;
    color:green;
    font-weight:800;
  }
</style>
</head>

<body>
<div class="box">
  <h2>‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡∏£‡∏ß‡∏° (‡∏ß‡∏¥‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÜ‡∏ä‡∏∏‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô/‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡∏Å‡∏•‡∏±‡∏ö)</h2>

  <textarea id="input" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå/‡∏ß‡∏≤‡∏á‡πÄ‡∏•‡∏Ç‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô
1025
1256 8015
8156"></textarea>

  <div class="btn-row">
    <button class="btn-run" onclick="run()">‡∏ß‡∏¥‡∏ô‡πÄ‡∏•‡∏Ç‡∏£‡∏ß‡∏°</button>
    <button class="btn-clear" onclick="resetAll()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
    <button class="btn-copy" onclick="copyAll()">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    <button class="btn-home" onclick="goHome()">‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
  </div>

  <div id="copied" class="copied-msg">‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß!</div>
  <div id="output" class="result"></div>
</div>

<script>
  const MIN_LEN = 3;

  function toThaiNumber(n){
    const th = ['‡πê','‡πë','‡πí','‡πì','‡πî','‡πï','‡πñ','‡πó','‡πò','‡πô'];
    return n.toString().split('').map(d => th[+d] ?? d).join('');
  }

  function hasDuplicates(str){
    return /(.).*\1/.test(str);
  }

  function normalizeToSets(raw){
    const cleaned = raw.replace(/[^\d]+/g, '\n').trim();
    if(!cleaned) return [];
    return cleaned.split(/\n+/).map(s => s.trim()).filter(Boolean);
  }

  function buildPairs(num){
    const set = new Set();
    for(let i=0;i<num.length;i++){
      for(let j=i+1;j<num.length;j++){
        set.add(num[i] + num[j]);
      }
    }
    return Array.from(set);
  }

  function validateSets(sets){
    let realIndex = 0;
    const bad = [];

    for (let i=0;i<sets.length;i++){
      const num = sets[i];
      if(!num) continue;
      realIndex++;

      if(num.length < MIN_LEN){
        bad.push(`‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà${toThaiNumber(realIndex)} (${num})`);
        continue;
      }

      if(hasDuplicates(num)){
        alert("‚ùóÔ∏è‡πÄ‡∏•‡∏Ç‡∏ã‡πâ‡∏≥ ‡πÄ‡πÄ‡∏à‡πâ‡∏á‡∏•‡∏Ñ.= ‡πÄ‡∏•‡∏Ç‡∏ã‡πâ‡∏≥‡∏à‡πâ‡∏≤ ‡πÅ‡∏≠‡∏î‡∏Ç‡∏≠‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà‡∏à‡πâ‡∏≤‡∏û‡∏µ‡πà\n(‡∏û‡∏ö‡πÉ‡∏ô‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà " + toThaiNumber(realIndex) + " : " + num + ")");
        return { ok:false };
      }
    }

    if(bad.length){
      alert("‚ùóÔ∏è‡∏°‡∏µ‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ú‡∏¥‡∏î (‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß)\n" + bad.join("\n") + "\n\n‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏ß‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà");
      return { ok:false };
    }

    return { ok:true };
  }

  function run(){
    const raw = document.getElementById("input").value;
    const sets = normalizeToSets(raw);

    if(sets.length === 0){
      document.getElementById("output").textContent = "‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏•‡∏Ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 3 ‡∏ï‡∏±‡∏ß‡∏ï‡πà‡∏≠‡∏ä‡∏∏‡∏î";
      document.getElementById("copied").style.display = "none";
      return;
    }

    const v = validateSets(sets);
    if(!v.ok){
      document.getElementById("output").textContent = "";
      document.getElementById("copied").style.display = "none";
      return;
    }

    let out = "";
    let count = 0;

    sets.forEach((num) => {
      if(!num || num.length < MIN_LEN) return;
      count++;

      const pairs = buildPairs(num);
      out += `‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà${toThaiNumber(count)}\n`;
      out += pairs.join(" ") + "\n\n";
    });

    document.getElementById("output").textContent = out.trim();
    document.getElementById("copied").style.display = "none";
  }

  function resetAll(){
    document.getElementById("input").value = "";
    document.getElementById("output").textContent = "";
    document.getElementById("copied").style.display = "none";
    setTimeout(() => focusInput(), 0);
  }

  function copyAll(){
    const raw = document.getElementById("output").textContent;
    if(!raw.trim()) return;

    let onlyNumbers = raw
      .replace(/^[\s\uFEFF\u200B]*‡∏ä‡∏∏‡∏î‡∏ó‡∏µ‡πà.*$/gm, "")
      .replace(/\n{3,}/g, "\n\n")
      .trim();

    if(!onlyNumbers) return;

    navigator.clipboard.writeText(onlyNumbers).then(() => {
      const msg = document.getElementById("copied");
      msg.style.display = "block";
      setTimeout(() => msg.style.display = "none", 1500);
    });
  }

  function goHome(){
    window.location.href = "index.html"; // üîÅ ‡πÅ‡∏Å‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ñ‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∑‡πà‡∏ô
  }

  document.getElementById("input").addEventListener("keydown", function(e){
    if(e.key === "Enter" && !e.shiftKey){
      e.preventDefault();
      run();
    }
  });

  document.getElementById("input").addEventListener("input", function(){
    const before = this.value;
    const after = before.replace(/[^\d]+/g, '\n');
    if(before !== after) this.value = after;
  });

  function focusInput(){
    const el = document.getElementById("input");
    if(el) el.focus({preventScroll:true});
  }
  window.addEventListener("load", focusInput);
  window.addEventListener("pageshow", focusInput);
</script>
</body>
</html>
